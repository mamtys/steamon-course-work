{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app.js","webpack:///./config/keys.js","webpack:///./config/passport-setup.js","webpack:///./models/item-model.js","webpack:///./models/res-info-model.js","webpack:///./models/user-model.js","webpack:///./routes/auth.js","webpack:///./routes/index.js","webpack:///./routes/profile.js","webpack:///./routes/user.js","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"cookie-session\"","webpack:///external \"express\"","webpack:///external \"express-handlebars\"","webpack:///external \"express-session\"","webpack:///external \"mongoose\"","webpack:///external \"morgan\"","webpack:///external \"passport\"","webpack:///external \"passport-steam\"","webpack:///external \"path\"","webpack:///external \"serve-favicon\""],"names":["express","require","passport","session","path","favicon","logger","cookieParser","cookieSession","bodyParser","exphbs","keys","mongoose","connect","mongodb","dbURI","useNewUrlParser","then","console","log","routes","users","auth","profile","passportSetup","app","env","process","locals","ENV","ENV_DEVELOPMENT","engine","defaultLayout","partialsDir","set","join","__dirname","use","json","urlencoded","extended","maxAge","cookieKey","initialize","req","res","next","err","Error","status","get","render","message","error","title","module","exports","SteamStrategy","Strategy","User","serializeUser","user","done","id","deserializeUser","findById","returnURL","realm","apiKey","identifier","curUser","_id","displayName","smallAvatar","save","userObj","Date","now","Schema","userSchema","itemName","String","gameName","smallPhoto","url","versionKey","Item","model","type","ref","telegram","unique","currancy","resInfo","router","Router","authenticate","failureRedirect","redirect","getItems","item","getSettings","sets","items","logout","sortpar","maxNumb","callback","find","sort","limit","exec","checkAuth","isAuthenticated","post","curInfo","body","tel","cur","info","Info","send"],"mappings":"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","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./app.js\");\n","\r\n\r\n\r\n\r\nconst express = require('express');\r\nconst passport = require('passport');\r\nconst session = require('express-session');\r\nconst path = require('path');\r\nconst favicon = require('serve-favicon');\r\nconst logger = require('morgan');\r\nconst cookieParser = require('cookie-parser');\r\nconst cookieSession = require('cookie-session');\r\nconst bodyParser = require('body-parser');\r\nconst exphbs  = require('express-handlebars');\r\n\r\n\r\nconst keys = require('./config/keys');\r\nconst mongoose = require('mongoose');\r\nmongoose.connect(keys.mongodb.dbURI, { useNewUrlParser: true })\r\n\t.then(()=>console.log('Mongo connected'))\r\n\t.catch(()=>console.log('Mongo connection err'));\r\n\r\nconst routes = require('./routes/index');\r\nconst users = require('./routes/user');\r\nconst auth = require('./routes/auth');\r\nconst profile = require('./routes/profile');\r\n\r\nconst passportSetup=require('./config/passport-setup');\r\n\r\nconst app = express();\r\n\r\nconst env = process.env.NODE_ENV || 'development';\r\napp.locals.ENV = env;\r\napp.locals.ENV_DEVELOPMENT = env == 'development';\r\n\r\n// view engine setup\r\n\r\napp.engine('handlebars', exphbs({\r\n\tdefaultLayout: 'main',\r\n\tpartialsDir: ['views/partials/']\r\n}));\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'handlebars');\r\n\r\n// app.use(favicon(__dirname + '/public/img/favicon.ico'));\r\napp.use(logger('dev'));\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({\r\n\textended: true\r\n}));\r\n\r\n\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\napp.use(cookieSession({\r\n\tmaxAge:24*3600000,\r\n\tkeys:[keys.session.cookieKey]\r\n}));\r\n\r\n\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n\t\r\napp.use('/', routes);\r\napp.use('/users', users);\r\napp.use('/auth', auth);\r\napp.use('/profile', profile);\r\n\r\n/// catch 404 and forward to error handler\r\napp.use((req, res, next) => {\r\n\tconst err = new Error('Not Found');\r\n\terr.status = 404;\r\n\tnext(err);\r\n});\r\n\r\n/// error handlers\r\n\r\n// development error handler\r\n// will print stacktrace\r\nif (app.get('env') === 'development') {\r\n\tapp.use((err, req, res, next) => {\r\n\t\tres.status(err.status || 500);\r\n\t\tres.render('error', {\r\n\t\t\tmessage: err.message,\r\n\t\t\terror: err,\r\n\t\t\ttitle: 'error'\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// production error handler\r\n// no stacktraces leaked to user\r\napp.use((err, req, res, next) => {\r\n\tres.status(err.status || 500);\r\n\tres.render('error', {\r\n\t\tmessage: err.message,\r\n\t\terror: {},\r\n\t\ttitle: 'error'\r\n\t});\r\n});\r\n\r\nmodule.exports = app;\r\n","\r\nmodule.exports = {\r\n\tmongodb:{\r\n\t\tdbURI:'mongodb+srv://admin:0216admin@cluster0-bhki0.mongodb.net/test?retryWrites=true'\r\n\t},\r\n\tsession:{\r\n\t\tcookieKey:'somecookiekeymbencr'\r\n\t}\r\n}","const passport = require('passport');\r\nconst SteamStrategy = require('passport-steam').Strategy;\r\nconst User = require('../models/user-model');\r\n\r\n\r\npassport.serializeUser(function(user, done) {\r\n  done(null, user.id);\r\n});\r\n\r\npassport.deserializeUser(function(id, done) {\r\n\tUser.findById(id,(err,user)=>{\r\n\t//\tconsole.log(\"deserialize:>>\"+id);\r\n\t\tif(err) done(err)\r\n\t\telse done(null,user);\r\n\t})\r\n});\r\npassport.use(new SteamStrategy({\r\n\treturnURL: 'http://localhost:3000/auth/steam/return',\r\n\trealm: 'http://localhost:3000/',\r\n\tapiKey: '0E85BB8884ECE2534C417A4F4A6A7CF8'\r\n},(identifier, profile, done)=>{\r\n\t//\tconsole.log(profile);\r\n\t\t//console.log(profile.id+ ' '+profile.displayName);\r\n\t\tUser.findById(profile.id)\r\n\t\t.then((curUser)=>{\r\n\t\t\tconsole.log(curUser)\r\n\t\t\tif(curUser){\r\n\t\t\t\tconsole.log(\"duplicate\"+curUser);\r\n\t\t\t\tdone(null,curUser);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tconst user=new User({\r\n\t\t\t\t\t_id:profile.id,\r\n\t\t\t\t\tdisplayName:profile.displayName,\r\n\t\t\t\t\tsmallAvatar:profile.smallAvatar\r\n\t\t\t\t});\r\n\t\t\t\tuser.save((err, userObj)=>{\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t  }\r\n\t\t\t\t\tconsole.log(userObj,\" registred \",Date.now());\r\n\t\t\t\t});\r\n\t\t\t\tdone(null,user);\r\n\t\t\t}\r\n  });\r\n  }));\r\n\r\n\r\n\r\n","const mongoose = require('mongoose');\r\nconst Schema = mongoose.Schema;\r\n\r\nconst userSchema = new Schema({\r\n\titemName:String,\r\n\tgameName:String,\r\n\tsmallPhoto:String,\r\n\turl:String\r\n},{ versionKey: false });\r\n\r\nconst Item = mongoose.model('item',userSchema);\r\n\r\nmodule.exports = Item;","const mongoose = require('mongoose');\r\nconst Schema = mongoose.Schema;\r\n\r\n\r\nconst userSchema = new Schema({\r\n    _id: { type: String, ref: 'User' },\r\n\ttelegram:{ type: String, unique: true },\r\n\tcurrancy:String,\r\n},{ versionKey: false });\r\n\r\nconst resInfo = mongoose.model('resInfo',userSchema);\r\n\r\nmodule.exports = resInfo;","const mongoose = require('mongoose');\r\nconst Schema = mongoose.Schema;\r\n\r\nconst userSchema = new Schema({\r\n\t_id:String,\r\n\tdisplayName:String,\r\n\tsmallAvatar:String,\r\n},{ versionKey: false });\r\n\r\nconst User = mongoose.model('user',userSchema);\r\n\r\nmodule.exports = User;","const express = require('express');\r\nconst router = express.Router();\r\nconst passport = require('passport');\r\n\r\nrouter.get('/steam',\r\n  passport.authenticate('steam', { failureRedirect: '/' }),\r\n  function(req, res) {\r\n    res.redirect('/');\r\n});\r\n\r\nrouter.get('/steam/return', passport.authenticate('steam', { failureRedirect: '/' }),\r\n  (req, res)=>{\r\n    res.redirect('/');\r\n  });\r\n\r\nmodule.exports = router;","const express = require('express');\nconst router = express.Router();\nconst passport = require('passport');\nconst Item=require('../models/item-model');\nconst resInfo=require('../models/res-info-model');\n\n\n\n/* GET home page. */\nrouter.get('/', (req, res) => { \n  getItems(\"-nameItem\",10,(item)=>{\n    if(req.user)\n    getSettings(req.user.id,sets=>{\n      res.render('index', {\n        user: req.user,\n        title: \"Steamon\",\n        items:item,\n        sets:sets\n      });\n    });\n    else \n    res.render('index', {\n      user: req.user,\n      title: \"Steamon\",\n      items:item\n    });\n  })\n});\n\nrouter.get('/logout', function(req, res){\n  req.logout();\n  res.redirect('/');\n});\n\nrouter.get('/search', function(req, res){\n  res.redirect('/');\n});\n\n\nfunction getItems(sortpar,maxNumb,callback){\n    Item.find({}).sort(sortpar).limit(maxNumb).exec((err,items)=>{\n    if(err) console.error(err);\n    else callback(items)\n  });\n}\n\nfunction getSettings(id,callback){\n      resInfo.findById(id,(err,sets)=>{\n      if(err) console.error(err);\n      else callback(sets)\n    })\n  }\n\nmodule.exports = router;\n\n","const router = require('express').Router();\r\nconst resInfo = require('../models/res-info-model');\r\n\r\nconst checkAuth=(req, res, next)=>{\r\n  if (req.isAuthenticated()) { return next(); }\r\n  res.redirect('/');\r\n}\r\n\r\nrouter.get('/', checkAuth, function(req, res){\r\n  res.render('profile', { user: req.user });\r\n});\r\n\r\nrouter.get('/settings', function(req, res){\r\n  res.render('profile', { user: req.user });\r\n});\r\n\r\nrouter.post('/', checkAuth, function(req, res){\r\n    resInfo.findById(req.user.id,(err,curInfo)=>{\r\n\t\tif(err) console.error(err);\r\n\t\telse if(curInfo) {\r\n      console.log(\"duplicate\"+curInfo);\r\n      curInfo.telegram=req.body.tel;\r\n      curInfo.currancy=req.body.cur;\r\n      curInfo.save();\r\n    } else {\t\t\t\r\n      \tconst info=new resInfo({\r\n        _id:req.user.id,\r\n\t\t\t\ttelegram:req.body.tel,\r\n        currancy:req.body.cur\r\n\t\t\t\t});\r\n        info.save((err, Info)=>{\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t  }\r\n\t\t\t\t\tconsole.log(Info+\"created\")\r\n\t\t\t\t});\r\n      }\r\n      });\r\n      console.log(req.user);\r\n      res.redirect('/profile');\r\n\t});\r\n\r\n\r\n\r\nmodule.exports = router;\r\n","const express = require('express');\nconst router = express.Router();\n\n\n/* GET users listing. */\n\nrouter.get('/', (req, res) => {\n  res.send('respond with a resource');\n});\n\nmodule.exports = router;\n","module.exports = require(\"body-parser\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cookie-session\");","module.exports = require(\"express\");","module.exports = require(\"express-handlebars\");","module.exports = require(\"express-session\");","module.exports = require(\"mongoose\");","module.exports = require(\"morgan\");","module.exports = require(\"passport\");","module.exports = require(\"passport-steam\");","module.exports = require(\"path\");","module.exports = require(\"serve-favicon\");"],"sourceRoot":""}