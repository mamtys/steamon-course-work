{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"express\"","webpack:///external \"passport\"","webpack:///external \"mongoose\"","webpack:///./models/res-info-model.js","webpack:///./app.js","webpack:///external \"express-session\"","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/process/browser.js","webpack:///external \"serve-favicon\"","webpack:///external \"morgan\"","webpack:///external \"cookie-parser\"","webpack:///external \"cookie-session\"","webpack:///external \"body-parser\"","webpack:///external \"express-handlebars\"","webpack:///./config/keys.js","webpack:///./routes/index.js","webpack:///./models/item-model.js","webpack:///./routes/user.js","webpack:///./routes/auth.js","webpack:///./routes/profile.js","webpack:///./config/passport-setup.js","webpack:///external \"passport-steam\"","webpack:///./models/user-model.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","mongoose","userSchema","Schema","_id","type","String","ref","telegram","unique","currancy","versionKey","resInfo","model","__dirname","express","passport","path","logger","cookieParser","cookieSession","bodyParser","exphbs","keys","connect","mongodb","dbURI","useNewUrlParser","then","console","log","routes","users","auth","profile","app","env","process","locals","ENV","ENV_DEVELOPMENT","engine","defaultLayout","partialsDir","set","join","use","json","urlencoded","extended","maxAge","session","cookieKey","initialize","req","res","next","err","Error","status","render","message","error","title","normalizeArray","parts","allowAboveRoot","up","length","last","splice","unshift","splitPathRe","splitPath","filename","exec","slice","filter","xs","f","push","resolve","resolvedPath","resolvedAbsolute","arguments","cwd","TypeError","charAt","split","normalize","isAbsolute","trailingSlash","substr","paths","Array","index","relative","from","to","trim","arr","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","concat","sep","delimiter","dirname","result","root","dir","basename","ext","extname","str","len","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","e","this","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","nextTick","args","apply","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","chdir","umask","router","Router","sortpar","maxNumb","callback","item","id","user","sets","items","findById","find","sort","limit","logout","redirect","itemName","gameName","smallPhoto","url","send","authenticate","failureRedirect","checkAuth","isAuthenticated","post","curInfo","body","tel","cur","save","Info","SteamStrategy","Strategy","User","serializeUser","done","deserializeUser","returnURL","realm","apiKey","identifier","curUser","displayName","smallAvatar","userObj","Date","now"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = require(\"express\");","module.exports = require(\"passport\");","module.exports = require(\"mongoose\");","const mongoose = require('mongoose');\r\nconst Schema = mongoose.Schema;\r\n\r\n\r\nconst userSchema = new Schema({\r\n    _id: { type: String, ref: 'User' },\r\n\ttelegram:{ type: String, unique: true },\r\n\tcurrancy:String,\r\n},{ versionKey: false });\r\n\r\nconst resInfo = mongoose.model('resInfo',userSchema);\r\n\r\nmodule.exports = resInfo;","\r\n\r\n\r\n\r\nconst express = require('express');\r\nconst passport = require('passport');\r\nconst session = require('express-session');\r\nconst path = require('path');\r\nconst favicon = require('serve-favicon');\r\nconst logger = require('morgan');\r\nconst cookieParser = require('cookie-parser');\r\nconst cookieSession = require('cookie-session');\r\nconst bodyParser = require('body-parser');\r\nconst exphbs  = require('express-handlebars');\r\n\r\n\r\nconst keys = require('./config/keys');\r\nconst mongoose = require('mongoose');\r\nmongoose.connect(keys.mongodb.dbURI, { useNewUrlParser: true })\r\n\t.then(()=>console.log('Mongo connected'))\r\n\t.catch(()=>console.log('Mongo connection err'));\r\n\r\nconst routes = require('./routes/index');\r\nconst users = require('./routes/user');\r\nconst auth = require('./routes/auth');\r\nconst profile = require('./routes/profile');\r\n\r\nconst passportSetup=require('./config/passport-setup');\r\n\r\nconst app = express();\r\n\r\nconst env = process.env.NODE_ENV || 'development';\r\napp.locals.ENV = env;\r\napp.locals.ENV_DEVELOPMENT = env == 'development';\r\n\r\n// view engine setup\r\n\r\napp.engine('handlebars', exphbs({\r\n\tdefaultLayout: 'main',\r\n\tpartialsDir: ['views/partials/']\r\n}));\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'handlebars');\r\n\r\n// app.use(favicon(__dirname + '/public/img/favicon.ico'));\r\napp.use(logger('dev'));\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({\r\n\textended: true\r\n}));\r\n\r\n\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\napp.use(cookieSession({\r\n\tmaxAge:24*3600000,\r\n\tkeys:[keys.session.cookieKey]\r\n}));\r\n\r\n\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n\t\r\napp.use('/', routes);\r\napp.use('/users', users);\r\napp.use('/auth', auth);\r\napp.use('/profile', profile);\r\n\r\n/// catch 404 and forward to error handler\r\napp.use((req, res, next) => {\r\n\tconst err = new Error('Not Found');\r\n\terr.status = 404;\r\n\tnext(err);\r\n});\r\n\r\n/// error handlers\r\n\r\n// development error handler\r\n// will print stacktrace\r\nif (app.get('env') === 'development') {\r\n\tapp.use((err, req, res, next) => {\r\n\t\tres.status(err.status || 500);\r\n\t\tres.render('error', {\r\n\t\t\tmessage: err.message,\r\n\t\t\terror: err,\r\n\t\t\ttitle: 'error'\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// production error handler\r\n// no stacktraces leaked to user\r\napp.use((err, req, res, next) => {\r\n\tres.status(err.status || 500);\r\n\tres.render('error', {\r\n\t\tmessage: err.message,\r\n\t\terror: {},\r\n\t\ttitle: 'error'\r\n\t});\r\n});\r\n\r\nmodule.exports = app;\r\n","module.exports = require(\"express-session\");","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = require(\"serve-favicon\");","module.exports = require(\"morgan\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cookie-session\");","module.exports = require(\"body-parser\");","module.exports = require(\"express-handlebars\");","\r\nmodule.exports = {\r\n\tmongodb:{\r\n\t\tdbURI:'mongodb+srv://admin:0216admin@cluster0-bhki0.mongodb.net/test?retryWrites=true'\r\n\t},\r\n\tsession:{\r\n\t\tcookieKey:'somecookiekeymbencr'\r\n\t}\r\n}","const express = require('express');\nconst router = express.Router();\nconst passport = require('passport');\nconst Item=require('../models/item-model');\nconst resInfo=require('../models/res-info-model');\n\n\n\n/* GET home page. */\nrouter.get('/', (req, res) => { \n  getItems(\"-nameItem\",10,(item)=>{\n    if(req.user)\n    getSettings(req.user.id,sets=>{\n      res.render('index', {\n        user: req.user,\n        title: \"Steamon\",\n        items:item,\n        sets:sets\n      });\n    });\n    else \n    res.render('index', {\n      user: req.user,\n      title: \"Steamon\",\n      items:item\n    });\n  })\n});\n\nrouter.get('/logout', function(req, res){\n  req.logout();\n  res.redirect('/');\n});\n\nrouter.get('/search', function(req, res){\n  res.redirect('/');\n});\n\n\nfunction getItems(sortpar,maxNumb,callback){\n    Item.find({}).sort(sortpar).limit(maxNumb).exec((err,items)=>{\n    if(err) console.error(err);\n    else callback(items)\n  });\n}\n\nfunction getSettings(id,callback){\n      resInfo.findById(id,(err,sets)=>{\n      if(err) console.error(err);\n      else callback(sets)\n    })\n  }\n\nmodule.exports = router;\n\n","const mongoose = require('mongoose');\r\nconst Schema = mongoose.Schema;\r\n\r\nconst userSchema = new Schema({\r\n\titemName:String,\r\n\tgameName:String,\r\n\tsmallPhoto:String,\r\n\turl:String\r\n},{ versionKey: false });\r\n\r\nconst Item = mongoose.model('item',userSchema);\r\n\r\nmodule.exports = Item;","const express = require('express');\nconst router = express.Router();\n\n\n/* GET users listing. */\n\nrouter.get('/', (req, res) => {\n  res.send('respond with a resource');\n});\n\nmodule.exports = router;\n","const express = require('express');\r\nconst router = express.Router();\r\nconst passport = require('passport');\r\n\r\nrouter.get('/steam',\r\n  passport.authenticate('steam', { failureRedirect: '/' }),\r\n  function(req, res) {\r\n    res.redirect('/');\r\n});\r\n\r\nrouter.get('/steam/return', passport.authenticate('steam', { failureRedirect: '/' }),\r\n  (req, res)=>{\r\n    res.redirect('/');\r\n  });\r\n\r\nmodule.exports = router;","const router = require('express').Router();\r\nconst resInfo = require('../models/res-info-model');\r\n\r\nconst checkAuth=(req, res, next)=>{\r\n  if (req.isAuthenticated()) { return next(); }\r\n  res.redirect('/');\r\n}\r\n\r\nrouter.get('/', checkAuth, function(req, res){\r\n  res.render('profile', { user: req.user });\r\n});\r\n\r\nrouter.get('/settings', function(req, res){\r\n  res.render('profile', { user: req.user });\r\n});\r\n\r\nrouter.post('/', checkAuth, function(req, res){\r\n    resInfo.findById(req.user.id,(err,curInfo)=>{\r\n\t\tif(err) console.error(err);\r\n\t\telse if(curInfo) {\r\n      console.log(\"duplicate\"+curInfo);\r\n      curInfo.telegram=req.body.tel;\r\n      curInfo.currancy=req.body.cur;\r\n      curInfo.save();\r\n    } else {\t\t\t\r\n      \tconst info=new resInfo({\r\n        _id:req.user.id,\r\n\t\t\t\ttelegram:req.body.tel,\r\n        currancy:req.body.cur\r\n\t\t\t\t});\r\n        info.save((err, Info)=>{\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t  }\r\n\t\t\t\t\tconsole.log(Info+\"created\")\r\n\t\t\t\t});\r\n      }\r\n      });\r\n      console.log(req.user);\r\n      res.redirect('/profile');\r\n\t});\r\n\r\n\r\n\r\nmodule.exports = router;\r\n","const passport = require('passport');\r\nconst SteamStrategy = require('passport-steam').Strategy;\r\nconst User = require('../models/user-model');\r\n\r\n\r\npassport.serializeUser(function(user, done) {\r\n  done(null, user.id);\r\n});\r\n\r\npassport.deserializeUser(function(id, done) {\r\n\tUser.findById(id,(err,user)=>{\r\n\t//\tconsole.log(\"deserialize:>>\"+id);\r\n\t\tif(err) done(err)\r\n\t\telse done(null,user);\r\n\t})\r\n});\r\npassport.use(new SteamStrategy({\r\n\treturnURL: 'http://localhost:3000/auth/steam/return',\r\n\trealm: 'http://localhost:3000/',\r\n\tapiKey: '0E85BB8884ECE2534C417A4F4A6A7CF8'\r\n},(identifier, profile, done)=>{\r\n\t//\tconsole.log(profile);\r\n\t\t//console.log(profile.id+ ' '+profile.displayName);\r\n\t\tUser.findById(profile.id)\r\n\t\t.then((curUser)=>{\r\n\t\t\tconsole.log(curUser)\r\n\t\t\tif(curUser){\r\n\t\t\t\tconsole.log(\"duplicate\"+curUser);\r\n\t\t\t\tdone(null,curUser);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tconst user=new User({\r\n\t\t\t\t\t_id:profile.id,\r\n\t\t\t\t\tdisplayName:profile.displayName,\r\n\t\t\t\t\tsmallAvatar:profile.smallAvatar\r\n\t\t\t\t});\r\n\t\t\t\tuser.save((err, userObj)=>{\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t  }\r\n\t\t\t\t\tconsole.log(userObj,\" registred \",Date.now());\r\n\t\t\t\t});\r\n\t\t\t\tdone(null,user);\r\n\t\t\t}\r\n  });\r\n  }));\r\n\r\n\r\n\r\n","module.exports = require(\"passport-steam\");","const mongoose = require('mongoose');\r\nconst Schema = mongoose.Schema;\r\n\r\nconst userSchema = new Schema({\r\n\t_id:String,\r\n\tdisplayName:String,\r\n\tsmallAvatar:String,\r\n},{ versionKey: false });\r\n\r\nconst User = mongoose.model('user',userSchema);\r\n\r\nmodule.exports = User;"],"sourceRoot":""}